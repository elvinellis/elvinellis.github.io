function shuffle(t){for(var i,e,s=t.length;0!==s;)e=Math.floor(Math.random()*s),i=t[s-=1],t[s]=t[e],t[e]=i;return t}function replaceVideo(t){$("#"+t).hide(),$("#"+t).after("<div class='video'><iframe allowfullscreen='allowfullscreen' frameborder='0' src='https://www.youtube.com/embed/"+t+"?modestbranding=1&rel=0'/></div>")}function loadVideo(t,i){$("#"+t).empty(),$("#"+t).show(),$("#"+t).append("<iframe allowfullscreen='allowfullscreen' class='video' frameborder='0' src='https://www.youtube.com/embed/"+i+"?modestbranding=1&rel=0'/>")}!function(t,i,e,s){"use strict";function o(i,e){this.element=i,this.options=t.extend({},r,e),this._defaults=r,this._name=n,this.init()}var n="photosetGrid",r={width:"100%",gutter:"0px",highresLinks:!1,lowresWidth:500,rel:"",borderActive:!1,borderWidth:"5px",borderColor:"#000000",borderRadius:"0",borderRemoveDouble:!1,onInit:function(){},onComplete:function(){}};o.prototype={init:function(){this.options.onInit(),this._setupRows(this.element,this.options),this._setupColumns(this.element,this.options)},_callback:function(t){this.options.onComplete(t)},_setupRows:function(i,e){if(e.layout)this.layout=e.layout;else if(t(i).attr("data-layout"))this.layout=t(i).attr("data-layout");else{for(var s="",o=0;o<t(i).find("img").length;o++)s+=1..toString();this.layout=s}this.rows=this.layout.split("");var n=t(i).find("img"),r=0;t.each(this.rows,function(t,i){var e=3;e="A"==i||"D"==i?4:"B"==i||"C"==i?3:"W"==i||"Z"==i?1:parseInt(i,10);var s=r,o=r+e;n.slice(s,o).wrapAll('<div class="photoset-row cols-'+i+'"></div>'),r=o}),t(i).find(".photoset-row:not(:last-child)").css({"margin-bottom":e.gutter})},_setupColumns:function(e,s){var o=this,n=function(o){function n(){var i=t(e).width().toString();i!==t(e).attr("data-width")&&(r.each(function(){if(t(this).hasClass("cols-A")){var e=t(this).find("img:eq(0)"),o=i/2/e.attr("width")*e.attr("height")-3*x,n=Math.ceil(o/3)-2;return t(this).find(".photoset-cell:gt(0)").css({height:n,overflow:"hidden",position:"relative"}),void t(this).find("img:gt(0)").css({"max-width":i/2,width:"auto",height:"auto",margin:"auto",position:"absolute",top:"-9999px",bottom:"-9999px",left:"-9999px",right:"-9999px"})}if(t(this).hasClass("cols-B")){var e=t(this).find("img:eq(0)"),o=i/2/e.attr("width")*e.attr("height")-3*x,n=Math.ceil(o/2)+1;return t(this).find(".photoset-cell:gt(0)").css({height:n,overflow:"hidden",position:"relative"}),void t(this).find("img:gt(0)").css({"max-width":i/2+70,width:"auto",height:"auto",margin:"auto",position:"absolute",top:"-9999px",bottom:"-9999px",left:"-9999px",right:"-9999px"})}if((t(this).hasClass("cols-W")||t(this).hasClass("cols-Z"))&&i>=600){var r=-i/8;t(this).css({"margin-left":r+"px","margin-right":r+"px"})}else{var a=t(this).find("img:eq(0)");t(this).find("img").each(function(){var i=t(this);parseInt(i.attr("height"),10)<parseInt(a.attr("height"),10)&&(a=t(this)),parseInt(i.css("width"),10)>s.lowresWidth&&i.attr("data-highres")&&i.attr("src",i.attr("data-highres"))});var h=a.attr("height")*parseInt(a.css("width"),10)/a.attr("width"),l=Math.floor(.025*h);t(this).height(h-l),s.borderActive&&t(this).find(".photoset-content-border").each(function(){t(this).css({height:h-l})}),t(this).find("img").each(function(){var i=t(this).attr("height")*parseInt(t(this).css("width"),10)/t(this).attr("width"),e=Math.floor(.5*(h-i))+"px";t(this).css({"margin-top":e})})}}),t(e).attr("data-width",i),t(".cols-Z").each(function(){var i=t("a > img",this).attr("src");i&&(t("a > img",this).css({height:"0",width:"0"}),t(this).css({background:"fixed center no-repeat","background-size":"cover","min-height":"100vh","background-image":"url("+i+")"}))}))}var r=t(e).find(".photoset-row"),a=t(e).find("img");s.highresLinks?(a.each(function(){var i;i=t(this).attr("title")?' title="'+t(this).attr("title")+'"':"";var e;e=t(this).attr("data-highres")?t(this).attr("data-highres"):t(this).attr("src"),t(this).wrapAll('<a href="'+e+'"'+i+' class="photoset-cell highres-link" />'),s.borderActive&&t(this).wrapAll('<span class="photoset-content-border" />')}),s.rel&&a.parent().attr("rel",s.rel)):a.each(function(){s.borderActive?(t(this).wrapAll('<div class="photoset-cell photoset-cell--border" />'),t(this).wrapAll('<div class="photoset-content-border" />')):t(this).wrapAll('<div class="photoset-cell" />')});var h=t(e).find(".photoset-cell"),l=t(e).find(".cols-1 .photoset-cell"),d=t(e).find(".cols-2 .photoset-cell"),c=t(e).find(".cols-3 .photoset-cell"),p=t(e).find(".cols-4 .photoset-cell"),f=t(e).find(".cols-5 .photoset-cell"),u=t(e).find(".cols-A .photoset-cell"),g=t(e).find(".cols-B .photoset-cell"),m=t(e).find(".cols-C .photoset-cell"),b=t(e).find(".cols-D .photoset-cell"),v=t(e).find(".cols-W .photoset-cell"),w=(t(e).find(".cols-Z .photoset-cell"),t(e).find(".photoset-content-border"));t(e).css({width:s.width}),r.css({clear:"left",display:"block",overflow:"hidden"}),h.css({float:"left",display:"block","line-height":"0","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","box-sizing":"border-box"}),a.css({width:"100%",height:"auto"}),s.borderActive&&w.css({display:"block",border:s.borderWidth+" solid "+s.borderColor,"border-radius":s.borderRadius,overflow:"hidden","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","box-sizing":"border-box"}),o&&a.each(function(){t(this).attr("height",t(this).height()),t(this).attr("width",t(this).width())}),v.css({width:"100%"}),l.css({width:"100%"}),d.css({width:"50%"}),c.css({width:"33.3%"}),p.css({width:"25%"}),f.css({width:"20%"}),u.css({width:"50%"}),g.css({width:"50%"}),m.css({width:"50%"}),b.css({width:"50%"});var x=parseInt(s.gutter,10);t(e).find(".photoset-cell:not(:last-child)").css({"padding-right":x/2+"px"}),t(e).find(".photoset-cell:not(:first-child)").css({"padding-left":x/2+"px"}),t(e).find(".cols-A .photoset-cell:nth-child(1)").css({"padding-right":x+"px"}),t(e).find(".cols-B .photoset-cell:nth-child(1)").css({"padding-right":x+"px"}),t(e).find(".cols-C .photoset-cell:nth-child(3)").css({"padding-left":x+"px"}),t(e).find(".cols-D .photoset-cell:nth-child(4)").css({"padding-left":x+"px"}),t(e).find(".cols-A .photoset-cell:nth-child(4n+2)").css({"margin-bottom":x/2+"px","padding-right":0}),t(e).find(".cols-A .photoset-cell:nth-child(4n+3)").css({"margin-top":x/2+"px","margin-bottom":x/2+"px","padding-right":0}),t(e).find(".cols-A .photoset-cell:nth-child(4n+4)").css({"margin-top":x/2+"px","padding-right":0}),t(e).find(".cols-B .photoset-cell:nth-child(3n+2)").css({"margin-bottom":x/2+"px","padding-left":0}),t(e).find(".cols-B .photoset-cell:nth-child(3n+3)").css({"margin-top":x/2+"px","padding-right":0}),s.borderRemoveDouble&&(t(e).find(".photoset-row").not(":eq(0)").find(".photoset-content-border").css({"border-top":"none"}),t(e).find(".photoset-row").not(".cols-1").find(".photoset-content-border").not(":eq(0)").css({"border-left":"none"})),n(),t(i).on("resize",function(){n()})},r=!0,a=!0;t(e).find("img").each(function(){a=a&!!t(this).attr("height")&!!t(this).attr("width")}),(r=!a)?t(e).imagesLoaded(function(){n(r),o._callback(e)}):(n(r),o._callback(e))}},t.fn[n]=function(i){return this.each(function(){t.data(this,"plugin_"+n)||t.data(this,"plugin_"+n,new o(this,i))})};var a="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";t.fn.imagesLoaded=function(i){function e(){var e=t(c),s=t(p);r&&(p.length?r.reject(l,e,s):r.resolve(l)),t.isFunction(i)&&i.call(n,l,e,s)}function s(t){o(t.target,"error"===t.type)}function o(i,o){i.src!==a&&-1===t.inArray(i,d)&&(d.push(i),o?p.push(i):c.push(i),t.data(i,"imagesLoaded",{isBroken:o,src:i.src}),h&&r.notifyWith(t(i),[o,l,t(c),t(p)]),l.length===d.length&&(setTimeout(e),l.unbind(".imagesLoaded",s)))}var n=this,r=t.isFunction(t.Deferred)?t.Deferred():0,h=t.isFunction(r.notify),l=n.find("img").add(n.filter("img")),d=[],c=[],p=[];return t.isPlainObject(i)&&t.each(i,function(t,e){"callback"===t?i=e:r&&r[t](e)}),l.length?l.bind("load.imagesLoaded error.imagesLoaded",s).each(function(i,e){var s=e.src,n=t.data(e,"imagesLoaded");n&&n.src===s?o(e,n.isBroken):e.complete&&void 0!==e.naturalWidth?o(e,0===e.naturalWidth||0===e.naturalHeight):(e.readyState||e.complete)&&(e.src=a,e.src=s)}):e(),r?r.promise(n):n};var h,l,d,c=t.event,p={_:0},f=0;h=c.special.throttledresize={setup:function(){t(this).on("resize",h.handler)},teardown:function(){t(this).off("resize",h.handler)},handler:function(i,e){var s=this,o=arguments;l=!0,d||(setInterval(function(){(++f>h.threshold&&l||e)&&(i.type="throttledresize",c.dispatch.apply(s,o),l=!1,f=0),f>9&&(t(p).stop(),d=!1,f=0)},30),d=!0)},threshold:0}}(jQuery,window,document),$.fn.bannerSlides=function(t){if(this.length>1)return this.each(function(){$(this).bannerSlides(t)}),this;var e=this;return this.coverList=[],this.slideContainer=$(this),this.slides=0,this.slidesLen=0,this.transitionTime=1300,this.delay=7e3,this.index=1,this.initialize=function(){for(e.slideContainer.attr("data")&&(e.coverList=e.slideContainer.attr("data").split(",")),0==e.coverList.length&&$("img._").map(function(){e.coverList.push($(this).attr("src").replace(/\/s[0-9]+\//,"/s"+t+"/"))}),e.slidesLen=e.coverList.length,i=0;i<e.slidesLen;i++)$("#coverList").append("<li id='b"+i+"'></li>");this.index=Math.floor(Math.random()*e.slidesLen),e.slides=e.slideContainer.find("li"),e.coverList=shuffle(e.coverList),e.doTransition(this.index)},this.doTransition=function(t){var i=t-1;t==e.slidesLen&&(t=0),void 0===$("#b"+t).attr("style")&&$("#b"+t).css("background-image","url("+e.coverList[t]+")"),$(e.slides[i]).fadeOut(e.transitionTime),$(e.slides[t]).fadeIn(e.transitionTime),t++,1!=e.slidesLen&&setTimeout(function(){e.doTransition(t)},e.delay)},this.initialize()},$(document).ready(function(){var t=800,i="sddefault",e=$(window).width();e>=3200?t=3200:e>=2400?(t=2400,i="maxresdefault"):e>=1600?t=1600:e>=1200&&(t=1200),$("#coverList").length&&$("#coverList").bannerSlides(t),$(".photoset img").each(function(i){var e=$(this).attr("src").replace(/\/s([\d]*)\//,"/s"+t+"/");if($(this).attr("data-highres",e),$(this).attr("src").includes("/s1600")){var s=$(this).attr("src").replace(/\/s([\d]*)\//,"/s"+t+"/");$(this).attr("src",s)}}),$(".photoset").photosetGrid({highresLinks:!0,rel:"gallery",gutter:"10px",onComplete:function(){$(".photoset a").colorbox({photo:!0,scalePhotos:!0,maxHeight:"100%",maxWidth:"100%",slideshow:!0,slideshowAuto:!1,slideshowSpeed:5e3,speed:500,transition:"fade"})}}),$(".markdown").each(function(t){var i=$(this).attr("data"),e=$(this);$.ajax({url:i}).done(function(t){var i=t.split("\n"),s="";for(a in i)ll=i[a],ll.length>1&&0==ll.indexOf("- ")?(""==s&&(s="<ul>"),s+="<li>"+ll.substr(2,ll.length)+"</li>"):(""!=s&&(s+="</ul>",e.append(s),s=""),e.append(ll+"<br />"))})}),$(".video").each(function(t){data=$(this).attr("data"),$(this).append('<iframe src="https://www.youtube.com/embed/'+data+'?color=white&showinfo=0&rel=0" frameborder="0" allowfullscreen/>')}),$(".videoset").each(function(t){if(data=$(this).attr("data"),list=data.split(","),list.length>0){layer=list[0],$(this).attr("data-layout",list.length);for(l in list)$(this).append('<img src="https://i.ytimg.com/vi/'+list[l]+"/"+i+'.jpg" onclick="loadVideo(\''+layer+"', '"+list[l]+"')\" />");$(this).after('<div class="video" id="'+layer+'" style="display:none"></div>')}}),$(".videoset").photosetGrid({gutter:"10px"}),jQuery("#colorbox").swipe({swipeRight:function(t,i,e,s,o){jQuery.colorbox.prev()},swipeLeft:function(t,i,e,s,o){jQuery.colorbox.next()},threshold:0}),$(document).ready(function(){var t=$("#toc");t&&(t.html("&#8258; "),$(".group").each(function(i){var e=$(this).find("h2").clone().children().remove().end().text(),s="";$(this).find("h3").each(function(t){var i=$(this).text().replace(/[\s|\(|\)|,]+/g,"-");$(this).attr("id",i),s+='<li><a href="#'+i+'">'+$(this).text()+"</a></li>"}),$(this).find("h2").after('<div class="subline"><ul>'+s+"</ul></div>");var o=e.replace(/\s+/g,"-");$(this).find("h2").attr("id",o);var n='<a href="#'+o+'">'+e+"</a>";0!=i?n=" &middot; "+n:i=1,t.append(n)}))})});
